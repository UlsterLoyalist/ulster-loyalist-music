<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Music of the Land — Ulster Loyalist Music</title>
  <link rel="stylesheet" href="album.css" />
</head>
<body>

  <header>
    <h1>Music of the Land</h1>
    <a href="index.html" class="back-link">← Back to Archive</a>
  </header>

  <section class="album-info">
    <img src="music/billy-wright/HQ.png" alt="Billy Wright Album Cover" />
    
    <div class="album-details">
      <p><strong>Album name: Songs of Freedom — In Memory of Billy Wright</strong></p>
      <div class="album-details">
        <p><strong>Date Published:</strong> 2024</p>
        <p><strong>Archive.org Link:</strong> <a href="https://archive.org/details/in-memory-of-billy-wright" target="_blank" rel="noopener noreferrer">Archive.org</a></p>
        <p><strong>Telegram Link:</strong> <a href="https://t.me/UlsterArchive/1413" target="_blank" rel="noopener noreferrer">Telegram Channel</a></p>
        <p><strong>Mega.nz Link:</strong> <a href="https://mega.nz/folder/LchUAKAR#YmcuvhdLOEzFetn1NsiSvQ" target="_blank" rel="noopener noreferrer">Mega.nz Folder</a></p>            
      </div>
    </div>
  </section>

  <section class="player-section">
    <ul id="tracklist"></ul>
  </section>

  <script>
    const album = {
      folder: "music/billy-wright/",
      tracks: [
        "1. Smash the IRA.mp3",
        "2. I.R.A..mp3",
        "3. Ole, Ole!.mp3",
        "4. Brave Ulster.mp3",
        "5. Loyalist.mp3",
        "6. Free Loyalist Prisoners.mp3",
        "7. No Surrender (to the IRA).mp3",
        "8. What does a mother tell her son.mp3",
        "9. Ulsters Torch.mp3",
        "10. Never Give In.mp3",
        "11. We fight for freedom.mp3",
        "12. Ulster.mp3",
        "13. Ulster Freedom Fighters.mp3",
        "14. Who Dares Wins.mp3",
        "15. New Nation.mp3",
        "16. Zero Option.mp3",
        "17. Memories.mp3",
        "18. UFF Promise .M.mp3",
        "19. House of Treason.mp3",
        "20. No Surrender.mp3",
        "21. Hang The I.R.A..mp3",
        "22. Ulster Won't Die.mp3",
        "23. Warlord.mp3",
        "24. Green and Pleasant Land.mp3",
        "Billy Wright.mp3"
      ]
    };

    const tracklist = document.getElementById('tracklist');
    let currentIndex = -1;
    let currentAudio = null;
    let currentPlayBtn = null;
    let currentSeekBar = null;
    let currentTimeDisplay = null;

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    function createTrackItem(track, index) {
      const li = document.createElement('li');
      li.className = 'track-item';

      const trackInfo = document.createElement('div');
      trackInfo.className = 'track-info';
      trackInfo.textContent = track;
      li.appendChild(trackInfo);

      const controls = document.createElement('div');
      controls.className = 'player-controls';

      const prevBtn = document.createElement('button');
      prevBtn.className = 'play-pause';
      prevBtn.innerHTML = '&#9664;';
      prevBtn.title = 'Previous';
      controls.appendChild(prevBtn);

      const playPauseBtn = document.createElement('button');
      playPauseBtn.className = 'play-pause';
      playPauseBtn.innerHTML = '&#9658;';
      playPauseBtn.setAttribute('aria-label', 'Play');
      controls.appendChild(playPauseBtn);

      const nextBtn = document.createElement('button');
      nextBtn.className = 'play-pause';
      nextBtn.innerHTML = '&#9654;';
      nextBtn.title = 'Next';
      controls.appendChild(nextBtn);

      const seekBar = document.createElement('input');
      seekBar.type = 'range';
      seekBar.className = 'seek-bar';
      seekBar.min = 0;
      seekBar.value = 0;
      controls.appendChild(seekBar);

      const timeDisplay = document.createElement('div');
      timeDisplay.className = 'time-display';
      timeDisplay.textContent = '0:00 / 0:00';
      controls.appendChild(timeDisplay);

      li.appendChild(controls);

      const audio = document.createElement('audio');
      audio.src = album.folder + encodeURIComponent(track);
      li.appendChild(audio);

      // Play/Pause toggle
      playPauseBtn.addEventListener('click', () => {
        if (currentAudio && currentAudio !== audio) {
          currentAudio.pause();
          if (currentPlayBtn) currentPlayBtn.innerHTML = '&#9658;';
          if (currentPlayBtn) currentPlayBtn.setAttribute('aria-label', 'Play');
          if (currentSeekBar) currentSeekBar.value = 0;
          if (currentTimeDisplay) currentTimeDisplay.textContent = '0:00 / 0:00';
          if (currentAudio.parentElement) currentAudio.parentElement.classList.remove('playing');
        }

        if (audio.paused) {
          audio.play();
          playPauseBtn.innerHTML = '&#10074;&#10074;';
          playPauseBtn.setAttribute('aria-label', 'Pause');
          li.classList.add('playing');
          currentAudio = audio;
          currentPlayBtn = playPauseBtn;
          currentSeekBar = seekBar;
          currentTimeDisplay = timeDisplay;
          currentIndex = index;
        } else {
          audio.pause();
          playPauseBtn.innerHTML = '&#9658;';
          playPauseBtn.setAttribute('aria-label', 'Play');
          li.classList.remove('playing');
        }
      });

      // Seekbar update
      audio.addEventListener('timeupdate', () => {
        seekBar.max = audio.duration;
        seekBar.value = audio.currentTime;
        timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
      });

      // Seek interaction
      seekBar.addEventListener('input', () => {
        audio.currentTime = seekBar.value;
      });

      // Track ended
      audio.addEventListener('ended', () => {
        playPauseBtn.innerHTML = '&#9658;';
        seekBar.value = 0;
        timeDisplay.textContent = '0:00 / 0:00';
        li.classList.remove('playing');
      });

      // Previous
      prevBtn.addEventListener('click', () => {
        if (index > 0) {
          document.querySelectorAll('audio')[index - 1].parentElement.querySelector('.play-pause:nth-child(2)').click();
        }
      });

      // Next
      nextBtn.addEventListener('click', () => {
        if (index < album.tracks.length - 1) {
          document.querySelectorAll('audio')[index + 1].parentElement.querySelector('.play-pause:nth-child(2)').click();
        }
      });

      return li;
    }

    album.tracks.forEach((track, index) => {
      const trackElement = createTrackItem(track, index);
      tracklist.appendChild(trackElement);
    });
  </script>

</body>
</html>
